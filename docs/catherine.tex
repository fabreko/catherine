\documentclass[a4paper]{article}

\usepackage[portuguese]{babel}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{fullpage}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage{pdflscape}
\usepackage{float}
\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{moreverb}
\usepackage{makeidx}
\usepackage{indentfirst}

\usepackage{mathpazo}
\linespread{1.05} 

\title{Projeto Final de Data Warehouse} 
\author{Augusto Fredigo Hack \and Fabricio Bez \and Luis Felipe Nunes \and Matheus Hoffmann Silva}

\pagestyle{fancy}
\rhead{\thepage}
\lhead{}
\cfoot{\footnotesize Florianópolis, 26 de julho de 2013.}
\chead{\footnotesize Universidade Federal de Santa Catarina}
\renewcommand{\footrulewidth}{0.0pt}
\renewcommand{\headrulewidth}{0.0pt}
\parindent 15pt
\voffset 5pt
\headsep 0.8in
\textheight 592pt
\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{5}

\begin{document}

	\begin{titlepage}
		\begin{center}
			{\large Universidade Federal de Santa Catarina}\\
			\vspace*{\fill} \begin{figure}[H] \centering \includegraphics[width=0.15\textwidth]{ufsc} \end{figure} \vskip 20pt
			{\Huge Projeto Final --- Catherine}\\	
			{\Large Data Warehouse --- INE5643}
			\vspace*{\fill}

			Augusto Fredigo Hack\\
			Fabricio Bez\\
			Luis Felipe Nunes\\
			Matheus Hoffmann Silva\\
			\vskip 45pt
			Florianópolis, 26 de julho de 2013
		\end{center}
	\end{titlepage}

	\newpage
	
	\tableofcontents

	\newpage

	\section{Resumo}
	TODO\\
	\indent Projeto Catherine. (O quê? Como? O que resultou? ¿ Palavras-chave)

	\section{Introdução}
	\indent As informações coletadas anualmente pela Universidade Federal de Santa Catarina com as inscrições e resultados de seu vestibular proporcionam uma ampla base de dados. Esta base contém informações sobre todos os candidatos que prestaram vestibular, tanto dados sócio-econômicos (provenientes do questionário sócio-econômico aplicado no momento da insrição do vestibular) e dados como endereço, data de nascimento do candidato, quanto resultados das provas.\\
	\indent O projeto Catherine procura utilizar os dados mencionados acima para analizar a situação das cidades do Estado de Santa Catarina quanto à média de aprovações no vestibular, a fim de identificar as regiões com menor média de aprovação. Estas regiões podem ser o foco de atuação de empresas que vendem Cursos Preparatórios para o vestibular, visto a defasagem da região, que podem ser um bom nicho de negócio.\\
	\indent Para enriquecer a base de dados já existente, será usado um levantamento de dados estatístico-educacionais disponibilizado pelo Instituto Nacional de Estudos e Pesquisas Educacionais Anísio Teixeira (INEP). Desse levantamento geral, serão utilizados os dados referentes às instituições de ensino por cidade de Santa Catarina. Estes dados serão úteis para saber onde há regiões onde os estudantes não prestaram vestibular para a UFSC, além de ter dados sobre quantos estudantes se formam e quantos efetivamente prestam vestibular.

	\section{Materiais}
	\indent Os dados de candidatos que prestaram vestibular foram disponibilizados pela Comissão Permanente do Vestibular (Coperve), que é a responsável por realizar o concurso vestibular para ingresso na UFSC. Para preservar a identidade e zelar pela privacidade dos indivíduos cujas informações estão presentes no banco de dados, não há meios de identificação presentes no banco, como nome, registro de identidade ou carteira de pessoa física.\\
	\indent No caso deste trabalho, serão utilizados os dados coletados dos vestibulares da UFSC para os anos de 2008 a 2012. Estes dados estão disponíveis em formato .sql, que é um \emph{dump} do banco de dados \textsc{MySQL}.\\
	\indent Além do Banco de Dados, está disponível o modelo Entidade Relacionamento e uma documentação on-line com mais detalhes do banco, que facilitam o entendimento do mesmo.

	\section{Métodos}
	TODO\\
	\indent (Revisão sobre DW e Data Mart, vislumbrando esta tecnologia como a solução para o problema)

	\section{Metodologia}
	\indent A metodologia utilizada neste projeto é a proposta por Ralph Kimball (Modelagem de Dimensões).
	\subsection{Escopo}
	\indent O projeto Catherine visa utilizar os dados dos vestibulares UFSC de 2008 a 2012, disponiblizados pela Coperve, para analizar a situação das cidades do Estado de Santa Catarina quanto à média de aprovações no vestibular, com o objetivo de identificar as regiões com menor média de aprovação. A identificação destas regiões podem ser úteis, no caso de empresas que vendem Cursos Preparatórios para o vestibular, para investir em novas áreas.\\
	\indent Além dos dados da Coperve, serão utilizados dados do INEP, que indicam o número de estudantes, das várias fases de ensino, das cidades de Santa Catarina.
	\subsection{Justificativa}
	\indent A criação do Data Warehouse se justifica pela complexidade das \emph{queries} no caso de utilizar um modelo de banco de dados relacional (convencional), além do uso de dados externos ao banco de dados disponibilizados pela Coperve.
	\subsection{Exclusões}
	\indent Não fazem parte do foco do projeto Catherine, ainda que disponíveis nas bases de dados da Coperve:
	\begin{itemize}
		\item Dados de candidatos que fizeram a prova como treino.
		\item Dados de candidatos faltantes.
		\item Informações de opções (1, 1a ou 2) de cursos de candidatos ou da escolha da língua estrangeira.
	\end{itemize}
	\subsection{Riscos}
	TODO
	\subsection{Fataores Críticos de Sucesso}
	TODO
	\subsection{Definição dos Requisitos}
	TODO
	\subsection{Modelagem Dimensional} 
	\subsubsection{Definição do Processo a ser Modelado}
	\indent A modelagem estrela vai envolver os dados referentes às provas e resultados, locais de origem dos candidatos, data data dos eventos e censo referente às escolas de Santa Catarina.
	\subsubsection{Definição da Granularidade}
	\indent Conforme o rítmo anual dos vestibulares da UFSC, foi definido a granularidade de tempo em {\bf anos}. A granularidade de local, é em {\bf cidades}.
	\subsubsection{Definição das Dimensões}
	\indent As dimensões identificadas no modelo estrela foram:
	\begin{itemize}
		\item Tempo: contém as indicações de tempo tanto em números quanto em textos, do ano, mês e dia.
		\item Local: indicação geográfica dos eventos, precisando a cidade e estado (por extenso e UF).
		\item Curso: O nome do curso, nome e sigla do centro onde é oferecido o curso.
	\end{itemize}
	\subsubsection{Definição dos Fatos}
	\indent Foram criados os seguintes Fatos para o Data Mart do projeto Catherine:
	\begin{itemize}
		\item Censo: contém os principais indicadores do projeto, {\bf por cidade}: média de acertos e notas dos candidatos, percentual de aprovação dos candidatos, se a maioria dos candidatos cursavam algum pré-vestibular, a quantidade de candidatos que cursou pré-vestibular e também a renda familiar bruta média dos candidatos. Além disso, números referentes à quantidades de estudantes que concluíram o ensino médio, por ano, para cada cidade do país.
		\item Vagas: refere-se às informações de vagas de cada curso. Contém o curso, ano das medidas, número de vagas oferecidas, médias de acertos e notas de redação.
	\end{itemize}
	\newpage
	\subsubsection{Modelo}
	\indent O modelo dimensional é apresentado abaixo:
	\begin{figure}[H]
		\centering
		\includegraphics[width=1\textwidth]{../db/catherine}
		\footnotesize{\vskip 10pt Diagrama gerado utilizando a ferramenta \textsc{MySQL Workbench}.}
	\end{figure}
\subsection{Projeto Físico} \indent O projeto físico foi desenvolvido utilizando a ferramenta de gerenciamento de bancos de dados \textsc{MySQL}, onde estão armazenados os dados do \emph{Data Mart}. O modelo dimensional foi gerado com a ferramenta \textsc{MySQL Workbench}. Quanto à padronização do modelo físico, foram adotados os seguintes padrões:
	\begin{itemize}
		\item Os nomes das tabelas e campos contém apenas letras minúsculas.
		\item Tabelas e campos com mais de uma palavra, devem usar \lq\_\rq para dividir as palavras.
		\item O nome de uma dimenção deve começar com \lq{}dim\_\rq , e o nome de um fato deve começar com \lq{}fato\_\rq.
	\end{itemize}

	\subsection{Projeto da Área de Transição -- ETL}
	\indent O projeto da àrea de transição foi realizado utilizando a ferramenta Pentaho Data Integration (Kettle). Esta ferramenta utiliza-se dos seguintes conceitos principais: transformations e jobs.\\
	\indent As transformations são um conjunto de steps que são as atividades relacionadas a integração de dados, como: carregamento de dados de uma tabela, operações com strings, filtros de valores, etc. Na transformation os \emph{steps} são executados em paralelo. Os jobs servem para estabelecer um fluxo na execução das transformations de maneira serial.\\
	\indent Neste trabalho a geração de cada fato e cada dimensão foi separada em transformations e a ordem de execução das transformations em jobs.
	\subsubsection{Área de Transição}
	\indent A primeira base de dados a ser gerada foi a da dimensão {\bf Curso}. Esta base tem geração simples, e é apenas necessário informações das tabelas centro e curso do modelo relacional. Abaixo segue a \emph{transformation} da dimensão Curso:
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\textwidth]{dim_curso}
		\footnotesize{\vskip 10pt  \emph{Transformation} da dimensão Curso.}
	\end{figure}
	Os passos ilustrados acima são:
	\begin{itemize}
		\item Entrada de dados: dois fluxos, um coletando informações referente ao curso e outro referente ao centro.
		\item União dos dados: \emph{join} dos dois fluxos anteriores.
		\item Filtragem de duplicados: filtra tuplas com informações duplicadas, gerando o \emph{output} {\bf dim\_curso}.
	\end{itemize}
	\indent A seguir, foi gerada a dimensão {\bf Local}. Além de utilizar as tabelas Cidade e Unidade Federativa do modelo relacional, foram acrescentadas todas as outras cidades que, por ventura, não estejam contidas no banco de dados da Coperve. A \emph{transformation} para a dimensão Local segue abaixo:
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\textwidth]{dim_local}
		\footnotesize{\vskip 10pt  \emph{Transformation} da dimensão Local.}
	\end{figure}
	\indent Procedimento de criação da dimensão Local:
	\begin{itemize}
		\item Existem três fluxos de importação de dados: dois fluxos provenientes do banco de dados disponibilizado pela Coperve, e outro com dados retirados do governo, que contém nomes das cidades brasileiras. 
		\item Os dados provenientes do banco de dados da Coperve são selecionados e sofrem uma união (join cidade uf) e, após retirar dados duplicados (remove coluna extra), são ordenados (Sort rows).
		\item Então as duas fontes de dados são unidas (une tuplas bases), e os dados duplicados são removidos (filtra duplicados).
		\item Ao final do processo, gera-se o \emph{output} {\bf dim\_local}.
	\end{itemize}

	\indent A dimensão {\bf Tempo} foi gerada utilizando \emph{bash script}, por questão de eficiência. Esta dimensão contém datas de 01 de janeiro de 2000, até 01 de janeiro de 2021. Os dados estão dividos entre dia, mês e ano (valores numéricos) e mês e dia da semana (texto).
	\begin{itemize}
		\item Colocar passos/bash aqui.
	\end{itemize}

	\indent Para a criação do fato {\bf Censo}, além de utilizar os dados do modelo relacional disponibilizado pela Coperve, faz uso de dados provenientes do censo escolar disponibilizado pelo INEP, que indicam a quantidade de estudantes, por cidade, que finalizaram o ensino médio (escolas públicas e privadas). Para tal, como ilustrado na \emph{transformation}, existem dois fluxos principais de entrata de dados.
	\begin{figure}[H]
		\centering
		%\includegraphics[width=0.8\textwidth]{fato_censo}
		\footnotesize{\vskip 10pt  \emph{Transformation} do fato Censo.}
	\end{figure}

	\indent O fato {\bf Vagas} é gerado utilizando apenas os dados disponibilizados pela Coperve. Segue a \emph{transformation}:
	\begin{figure}[H]
		\centering
		%\includegraphics[width=0.8\textwidth]{fato_vagas}
		\footnotesize{\vskip 10pt  \emph{Transformation} do fato Vagas.}
	\end{figure}

	\indent TODO: Jobs: 1-Deploy Dimensões; 2-Deploy Fatos; 3-Deploy geral.

	\section{Resultados}
	TODO
	\section{Conclusão e Trabalhos Futuros}
	TODO
	\section{Bibliografia}
	TODO

\end{document}

